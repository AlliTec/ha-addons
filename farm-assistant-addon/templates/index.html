<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <h1>Farm Assistant</h1>
    <div class="heading-container">
        <h2>Livestock List</h2>
    </div>
    
    <!-- Main Section Tabs -->
    <div id="section-tabs">
        <button class="section-tab active" data-section="livestock">
            <i class="fa-solid fa-cow"></i> Livestock Register
        </button>
        <button class="section-tab" data-section="assets">
            <i class="fa-solid fa-tractor"></i> Asset Register
        </button>
        <button class="section-tab" data-section="calendar">
            <i class="fa-solid fa-calendar"></i> Calendar
        </button>
    </div>
    
    <!-- Livestock Section -->
    <div id="livestock-section" class="section-content">
        <div id="filter-bar">
            <!-- Filter tabs will be dynamically populated here -->
        </div>
        <table id="livestock-list">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Gender</th>
                    <th>Status</th>
                    <th>Age</th>
                </tr>
            </thead>
         <tbody>
        </tbody>
    </table>
    </div>
    
    <!-- Assets Section -->
    <div id="assets-section" class="section-content" style="display: none;">
        <div id="assets-filter-bar">
            <!-- Assets filter tabs will be dynamically populated here -->
        </div>
        <table id="assets-list">
            <thead>
                <tr>
                    <th>Photo</th>
                    <th>Asset Name</th>
                    <th>Make/Model</th>
                    <th>Location</th>
                    <th>Status</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody>
                <!-- Asset rows will be dynamically populated here -->
            </tbody>
        </table>
    </div>
    
    <!-- Calendar Section -->
    <div id="calendar-section" class="section-content" style="display: none;">
        <div class="calendar-controls">
            <div class="calendar-filters">
                <label for="calendar-filter-type"><i class="fa-solid fa-calendar-days"></i></label>
                <select id="calendar-filter-type">
                    <option value="day">Day</option>
                    <option value="week">Week</option>
                    <option value="month" selected>Month</option>
                    <option value="year">Year</option>
                </select>
                
                <label for="calendar-entry-type"><i class="fa-solid fa-tag"></i></label>
                <select id="calendar-entry-type">
                    <option value="">All Types</option>
                    <option value="informational">Informational</option>
                    <option value="action">Action Items</option>
                </select>
                
                <label for="calendar-category"><i class="fa-solid fa-layer-group"></i></label>
                <select id="calendar-category">
                    <option value="">All Categories</option>
                    <option value="livestock">Livestock</option>
                    <option value="asset">Assets</option>
                </select>
                
                <button id="refresh-calendar" class="action-btn">
                    <i class="fa-solid fa-refresh"></i> Refresh
                </button>
            </div>
        </div>
        
        <div class="calendar-nav-tabs">
            <button id="calendar-nav-prev" class="filter-btn">
                <i class="fa-solid fa-chevron-left"></i>
            </button>
            <button id="calendar-period-display" class="filter-btn active">
                <span id="calendar-date-display"></span>
            </button>
            <button id="calendar-nav-next" class="filter-btn">
                <i class="fa-solid fa-chevron-right"></i>
            </button>
        </div>
        
        <div class="calendar-container">
            <div id="calendar-events">
                <!-- Calendar events will be dynamically populated here -->
            </div>
        </div>
    </div>

    <script src="static/script.js?v={{ addon_version }}&t={{ timestamp }}"></script>
    <div id="image-modal" class="modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modal-image">
    </div>
    <div id="animal-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Animal Details</h2>
                <div class="modal-actions">
                    <button id="update-animal-btn" class="action-btn update-btn">
                        <i class="fa-solid fa-pencil"></i> Edit
                    </button>
                    <button id="delete-animal-btn" class="action-btn delete-btn">
                        <i class="fa-solid fa-trash-can"></i> Delete
                    </button>
                    <button id="schedule-event-btn" class="action-btn maintenance-btn">
                        <i class="fa-solid fa-calendar-plus"></i> Record Event
                    </button>
                    <button id="view-animal-history-btn" class="action-btn">
                        <i class="fa-solid fa-clock-rotate-left"></i> History
                    </button>
                    <button class="close-details-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Close
                    </button>
                </div>
            </div>
            <div id="animal-details-content" class="details-grid"></div>
        </div>
    </div>
    
    <!-- Edit Animal Modal -->
    <div id="edit-animal-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Edit Animal</h2>
                <div class="modal-actions">
                    <button type="submit" form="edit-animal-form" class="action-btn update-btn">
                        <i class="fa-solid fa-save"></i> Save Changes
                    </button>
                    <button type="button" class="close-edit-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Cancel
                    </button>
                </div>
            </div>
            <form id="edit-animal-form">
                <input type="hidden" id="edit-animal-id">
                <div class="form-grid">
                    <div>
                        <label for="edit-tag-id">Tag ID:</label>
                        <input type="text" id="edit-tag-id" name="tag_id" required>
                    </div>
                    <div>
                        <label for="edit-name">Name:</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="text" id="edit-name" name="name" style="flex: 1;">
                            <button type="button" id="generate-name-btn" class="action-btn" style="margin-top: 5px; padding: 8px 12px; font-size: 12px;">
                                <i class="fa-solid fa-hat-wizard"></i> Namer
                            </button>
                        </div>
                    </div>
                    <div>
                        <label for="edit-category">Category:</label>
                        <select id="edit-category" name="category">
                            <option value="">Select Category</option>
                            <option value="Cattle">Cattle</option>
                            <option value="Goat">Goat</option>
                            <option value="Sheep">Sheep</option>
                            <option value="Pig">Pig</option>
                            <option value="Horse">Horse</option>
                            <option value="Donkey">Donkey</option>
                            <option value="Llama">Llama</option>
                            <option value="Alpaca">Alpaca</option>
                            <option value="Cat">Cat</option>
                            <option value="Dog">Dog</option>
                            <option value="Goose">Goose</option>
                            <option value="Duck">Duck</option>
                            <option value="Turkey">Turkey</option>
                            <option value="Chicken">Chicken</option>
                            <option value="Guinea Fowl">Guinea Fowl</option>
                            <option value="Rabbit">Rabbit</option>
                        </select>
                    </div>
                    <div>
                        <label for="edit-gender">Gender:</label>
                        <select id="edit-gender" name="gender">
                            <option value="">Select Category First</option>
                        </select>
                    </div>
                    <div>
                        <label for="edit-breed">Breed:</label>
                        <input type="text" id="edit-breed" name="breed">
                    </div>
                    <div>
                        <label for="edit-features">Features:</label>
                        <input type="text" id="edit-features" name="features">
                    </div>
                    <div>
                        <label for="edit-date-of-birth">Date of Birth:</label>
                        <input type="date" id="edit-date-of-birth" name="date_of_birth">
                    </div>
                    <div>
                        <label for="edit-date-of-disposal">Date of Disposal/Death:</label>
                        <input type="date" id="edit-date-of-disposal" name="dod">
                    </div>
                    <div>
                        <label for="edit-weight">Weight (kg):</label>
                        <input type="number" id="edit-weight" name="weight" step="0.1" min="0" placeholder="Enter weight">
                    </div>
                    <div>
                        <label for="edit-status">Status:</label>
                        <select id="edit-status" name="status">
                            <option value="Active">Active</option>
                            <option value="Sold">Sold</option>
                            <option value="Deceased">Deceased</option>
                        </select>
                    </div>
                </div>
                <div class="form-section">
                    <label for="edit-notes">Notes:</label>
                    <textarea id="edit-notes" name="notes" rows="3"></textarea>
                </div>
                <div class="form-grid-three">
                    <div>
                        <label for="edit-dam-id">Dam (Mother):</label>
                        <select id="edit-dam-id" name="dam_id">
                            <option value="">Select Dam</option>
                        </select>
                    </div>
                    <div>
                        <label for="edit-sire-id">Sire (Father):</label>
                        <select id="edit-sire-id" name="sire_id">
                            <option value="">Select Sire</option>
                        </select>
                    </div>
                    <div>
                        <label for="edit-health-status">Health Status:</label>
                        <input type="text" id="edit-health-status" name="health_status">
                    </div>
                </div>
                <div class="form-grid">
                    <div class="photo-upload-section" style="grid-column: 1 / -1;">
                        <label>Animal Photos:</label>
                        <div id="animal-photo-upload" class="photo-upload-area">
                            <input type="file" id="animal-photo-input" accept="image/*" multiple style="display: none;">
                            <div id="photo-preview-container" style="display: none;">
                                <div id="photo-gallery" class="photo-gallery"></div>
                                <button type="button" id="add-more-photos-btn" class="action-btn" style="margin-top: 10px;">
                                    <i class="fa-solid fa-plus"></i> Add More Photos
                                </button>
                            </div>
                            <div id="photo-placeholder">
                                <i class="fa-solid fa-cloud-upload-alt" style="font-size: 48px; color: #ccc; margin-bottom: 10px;"></i>
                                <p style="margin: 0; color: #666;">Drag images here or click to upload</p>
                                <p style="margin: 5px 0 0 0; font-size: 12px; color: #999;">Supports: JPG, PNG, GIF (Max 5MB each)</p>
                                <p style="margin: 5px 0 0 0; font-size: 12px; color: #999;">Multiple photos allowed</p>
                            </div>
                        </div>
                        <input type="hidden" id="edit-photo-path" name="photo_path">
                        <input type="hidden" id="edit-pic" name="pic">
                    </div>
                </div>

            </form>
        </div>
    </div>
    
    <!-- Add Asset Modal -->
    <div id="add-asset-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Add New Asset</h2>
                <div class="modal-actions">
                    <button type="submit" form="add-asset-form" class="action-btn add-btn">
                        <i class="fa-solid fa-plus"></i> Add Asset
                    </button>
                    <button type="button" class="close-add-asset-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Cancel
                    </button>
                </div>
            </div>
            <form id="add-asset-form">
                <!-- Basic Information -->
                <div class="form-section">
                    <h3>Basic Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="add-asset-name">Asset Name:</label>
                            <input type="text" id="add-asset-name" name="name" required>
                        </div>
                        <div>
                            <label for="add-asset-category">Category:</label>
                            <select id="add-asset-category" name="category">
                                <option value="">Select Category</option>
                                <option value="Equipment">Equipment</option>
                                <option value="Vehicle">Vehicle</option>
                                <option value="Building">Building</option>
                                <option value="Tool">Tool</option>
                                <option value="Machinery">Machinery</option>
                            </select>
                        </div>

                        <div>
                            <label for="add-asset-make">Make:</label>
                            <div style="display: flex; gap: 5px;">
                                <select id="add-asset-make" name="make" style="flex: 1;">
                                    <option value="">Select Make</option>
                                    <option value="__new__">+ Add New Make</option>
                                </select>
                                <input type="text" id="add-asset-make-new" placeholder="Enter new make" style="display: none; flex: 1;">
                            </div>
                        </div>
                        <div>
                            <label for="add-asset-model">Model:</label>
                            <div style="display: flex; gap: 5px;">
                                <select id="add-asset-model" name="model" style="flex: 1;">
                                    <option value="">Select Model</option>
                                    <option value="__new__">+ Add New Model</option>
                                </select>
                                <input type="text" id="add-asset-model-new" placeholder="Enter new model" style="display: none; flex: 1;">
                            </div>
                        </div>
                        <div>
                            <label for="add-asset-year">Year:</label>
                            <select id="add-asset-year" name="year">
                                <option value="">Select Year</option>
                            </select>
                        </div>
                        <div>
                            <label for="add-asset-body-feature">Body/Feature:</label>
                            <select id="add-asset-body-feature" name="body_feature">
                                <option value="">Select Body Type</option>
                            </select>
                        </div>
                        <div>
                            <label for="add-asset-badge">Badge/Trim:</label>
                            <select id="add-asset-badge" name="badge">
                                <option value="">Select Badge/Trim</option>
                            </select>
                        </div>
                        <div>
                            <label for="add-asset-serial">Serial Number/VIN:</label>
                            <input type="text" id="add-asset-serial" name="serial_number" placeholder="Enter VIN or serial number">
                            <button type="button" id="add-asset-vin-lookup" onclick="populateFromVIN(document.getElementById('add-asset-serial').value, 'add')" style="margin-top: 5px; padding: 5px 10px; background: var(--accent-color); color: white; border: none; border-radius: 3px; cursor: pointer;">Lookup VIN</button>
                        </div>
                        <div>
                            <label for="add-asset-quantity">Quantity:</label>
                            <input type="number" id="add-asset-quantity" name="quantity" value="1" min="1">
                        </div>
                    </div>
                </div>

                <!-- Status & Location -->
                <div class="form-section">
                    <h3>Status & Location</h3>
                    <div class="form-grid">
                        <div>
                            <label for="add-asset-status">Status:</label>
                            <select id="add-asset-status" name="status">
                                <option value="operational">Operational</option>
                                <option value="maintenance">Under Maintenance</option>
                                <option value="repair">Needs Repair</option>
                                <option value="retired">Retired</option>
                            </select>
                        </div>
                        <div>
                            <label for="add-asset-location">Location:</label>
                            <input type="text" id="add-asset-location" name="location">
                        </div>
                        <div>
                            <label for="add-asset-parent">Parent Asset:</label>
                            <select id="add-asset-parent" name="parent_asset_id">
                                <option value="">No Parent Asset</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Purchase Information -->
                <div class="form-section">
                    <h3>Purchase Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="add-asset-purchase-date">Purchase Date:</label>
                            <input type="date" id="add-asset-purchase-date" name="purchase_date">
                        </div>
                        <div>
                            <label for="add-asset-purchase-price">Purchase Price:</label>
                            <input type="number" id="add-asset-purchase-price" name="purchase_price" step="0.01" min="0">
                        </div>
                        <div>
                            <label for="add-asset-purchase-location">Purchase Location:</label>
                            <input type="text" id="add-asset-purchase-location" name="purchase_location">
                        </div>
                        <div>
                            <label for="add-asset-warranty-provider">Warranty Provider:</label>
                            <input type="text" id="add-asset-warranty-provider" name="warranty_provider">
                        </div>
                        <div>
                            <label for="add-asset-warranty-expiry">Warranty Expiry:</label>
                            <input type="date" id="add-asset-warranty-expiry" name="warranty_expiry_date">
                        </div>
                    </div>
                </div>

                <!-- Registration & Insurance -->
                <div class="form-section">
                    <h3>Registration & Insurance</h3>
                    <div class="form-grid">
                        <div>
                            <label for="add-asset-registration">Registration No:</label>
                            <input type="text" id="add-asset-registration" name="registration_no">
                        </div>
                        <div>
                            <label for="add-asset-registration-due">Registration Due:</label>
                            <input type="date" id="add-asset-registration-due" name="registration_due">
                        </div>
                        <div>
                            <label for="add-asset-insurance">Insurance Info:</label>
                            <input type="text" id="add-asset-insurance" name="insurance_info">
                        </div>
                        <div>
                            <label for="add-asset-insurance-due">Insurance Due:</label>
                            <input type="date" id="add-asset-insurance-due" name="insurance_due">
                        </div>
                    </div>
                </div>

                <!-- Permits & Documentation -->
                <div class="form-section">
                    <h3>Permits & Documentation</h3>
                    <div class="form-grid">
                        <div>
                            <label for="add-asset-permit">Permit Info:</label>
                            <textarea id="add-asset-permit" name="permit_info" rows="2"></textarea>
                        </div>
                        <div>
                            <label for="add-asset-manual">Manual/Doc Path:</label>
                            <input type="text" id="add-asset-manual" name="manual_or_doc_path">
                        </div>
                    </div>
                </div>

                <!-- Usage Information -->
                <div class="form-section">
                    <h3>Usage Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="add-asset-usage-type">Usage Type:</label>
                            <select id="add-asset-usage-type" name="usage_type">
                                <option value="">Select Usage Type</option>
                                <option value="hours">Hours</option>
                                <option value="ODO">ODO</option>
                                <option value="km">Kilometers</option>
                                <option value="cycles">Cycles</option>
                            </select>
                        </div>
                        <div>
                            <label for="add-asset-usage-value">Usage Value:</label>
                            <input type="number" id="add-asset-usage-value" name="usage_value" step="0.1" placeholder="Current hours/ODO reading">
                        </div>
                    </div>
                    <div class="form-section">
                        <label for="add-asset-usage-notes">Usage Notes:</label>
                        <textarea id="add-asset-usage-notes" name="usage_notes" rows="2" placeholder="Optional notes about this usage entry"></textarea>
                    </div>
                </div>

                <!-- Asset Photo -->
                <div class="form-section">
                    <h3>Asset Photo</h3>
                    <input type="file" id="add-asset-photo" name="photo" accept="image/*" style="margin-bottom: 10px;">
                    <div id="add-asset-photo-preview" style="margin-top: 10px;"></div>
                </div>

                <!-- General Notes -->
                <div class="form-section">
                    <h3>General Notes</h3>
                    <textarea id="add-asset-notes" name="notes" rows="3" placeholder="Any additional notes about this asset"></textarea>
                </div>


            </form>
        </div>
    </div>
    
    <!-- Asset Details Modal -->
    <div id="asset-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Asset Details</h2>
                <div class="modal-actions">
                    <button id="edit-asset-btn" class="action-btn update-btn">
                        <i class="fa-solid fa-edit"></i> Edit
                    </button>
                    <button id="delete-asset-btn" class="action-btn delete-btn">
                        <i class="fa-solid fa-trash-can"></i> Delete
                    </button>
                    <button id="maintenance-schedule-btn" class="action-btn maintenance-btn">
                        <i class="fa-solid fa-wrench"></i> Maintenance
                    </button>
                    <button id="view-maintenance-history-btn" class="action-btn">
                        <i class="fa-solid fa-history"></i> History
                    </button>
                    <button class="close-asset-details-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Close
                    </button>
                </div>
            </div>
            <div id="asset-details-content">
                <!-- Asset details will be populated here -->
            </div>
        </div>
    </div>
    
    <!-- Edit Asset Modal -->
    <div id="edit-asset-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Edit Asset</h2>
                <div class="modal-actions">
                    <button type="submit" form="edit-asset-form" class="action-btn update-btn">
                        <i class="fa-solid fa-save"></i> Save Changes
                    </button>
                    <button type="button" class="close-edit-asset-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Cancel
                    </button>
                </div>
            </div>
            <form id="edit-asset-form">
                <input type="hidden" id="edit-asset-id">
                
                <!-- Basic Information -->
                <div class="form-section">
                    <h3>Basic Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="edit-asset-name">Asset Name:</label>
                            <input type="text" id="edit-asset-name" name="name" required>
                        </div>
                        <div>
                            <label for="edit-asset-category">Category:</label>
                            <select id="edit-asset-category" name="category">
                                <option value="">Select Category</option>
                                <option value="Equipment">Equipment</option>
                                <option value="Vehicle">Vehicle</option>
                                <option value="Building">Building</option>
                                <option value="Tool">Tool</option>
                                <option value="Machinery">Machinery</option>
                            </select>
                        </div>

                        <div>
                            <label for="edit-asset-make">Make:</label>
                            <div style="display: flex; gap: 5px;">
                                <select id="edit-asset-make" name="make" style="flex: 1;">
                                    <option value="">Select Make</option>
                                    <option value="__new__">+ Add New Make</option>
                                </select>
                                <input type="text" id="edit-asset-make-new" placeholder="Enter new make" style="display: none; flex: 1;">
                            </div>
                        </div>
                        <div>
                            <label for="edit-asset-model">Model:</label>
                            <div style="display: flex; gap: 5px;">
                                <select id="edit-asset-model" name="model" style="flex: 1;">
                                    <option value="">Select Model</option>
                                    <option value="__new__">+ Add New Model</option>
                                </select>
                                <input type="text" id="edit-asset-model-new" placeholder="Enter new model" style="display: none; flex: 1;">
                            </div>
                        </div>
                        <div>
                            <label for="edit-asset-year">Year:</label>
                            <select id="edit-asset-year" name="year">
                                <option value="">Select Year</option>
                            </select>
                        </div>
                        <div>
                            <label for="edit-asset-body-feature">Body/Feature:</label>
                            <select id="edit-asset-body-feature" name="body_feature">
                                <option value="">Select Body Type</option>
                            </select>
                        </div>
                        <div>
                            <label for="edit-asset-badge">Badge/Trim:</label>
                            <select id="edit-asset-badge" name="badge">
                                <option value="">Select Badge/Trim</option>
                            </select>
                        </div>
                        <div>
                            <label for="edit-asset-serial">Serial Number/VIN:</label>
                            <input type="text" id="edit-asset-serial" name="serial_number" placeholder="Enter VIN or serial number">
                            <button type="button" id="edit-asset-vin-lookup" onclick="populateFromVIN(document.getElementById('edit-asset-serial').value, 'edit')" style="margin-top: 5px; padding: 5px 10px; background: var(--accent-color); color: white; border: none; border-radius: 3px; cursor: pointer;">Lookup VIN</button>
                        </div>
                        <div>
                            <label for="edit-asset-quantity">Quantity:</label>
                            <input type="number" id="edit-asset-quantity" name="quantity" min="1">
                        </div>
                    </div>
                </div>

                <!-- Status & Location -->
                <div class="form-section">
                    <h3>Status & Location</h3>
                    <div class="form-grid">
                        <div>
                            <label for="edit-asset-status">Status:</label>
                            <select id="edit-asset-status" name="status">
                                <option value="operational">Operational</option>
                                <option value="maintenance">Under Maintenance</option>
                                <option value="repair">Needs Repair</option>
                                <option value="retired">Retired</option>
                            </select>
                        </div>
                        <div>
                            <label for="edit-asset-location">Location:</label>
                            <input type="text" id="edit-asset-location" name="location">
                        </div>
                        <div>
                            <label for="edit-asset-parent">Parent Asset:</label>
                            <select id="edit-asset-parent" name="parent_asset_id">
                                <option value="">No Parent Asset</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Purchase Information -->
                <div class="form-section">
                    <h3>Purchase Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="edit-asset-purchase-date">Purchase Date:</label>
                            <input type="date" id="edit-asset-purchase-date" name="purchase_date">
                        </div>
                        <div>
                            <label for="edit-asset-purchase-price">Purchase Price:</label>
                            <input type="number" id="edit-asset-purchase-price" name="purchase_price" step="0.01" min="0">
                        </div>
                        <div>
                            <label for="edit-asset-purchase-location">Purchase Location:</label>
                            <input type="text" id="edit-asset-purchase-location" name="purchase_location">
                        </div>
                        <div>
                            <label for="edit-asset-warranty-provider">Warranty Provider:</label>
                            <input type="text" id="edit-asset-warranty-provider" name="warranty_provider">
                        </div>
                        <div>
                            <label for="edit-asset-warranty-expiry">Warranty Expiry:</label>
                            <input type="date" id="edit-asset-warranty-expiry" name="warranty_expiry_date">
                        </div>
                    </div>
                </div>

                <!-- Registration & Insurance -->
                <div class="form-section">
                    <h3>Registration & Insurance</h3>
                    <div class="form-grid">
                        <div>
                            <label for="edit-asset-registration">Registration No:</label>
                            <input type="text" id="edit-asset-registration" name="registration_no">
                        </div>
                        <div>
                            <label for="edit-asset-registration-due">Registration Due:</label>
                            <input type="date" id="edit-asset-registration-due" name="registration_due">
                        </div>
                        <div>
                            <label for="edit-asset-insurance">Insurance Info:</label>
                            <input type="text" id="edit-asset-insurance" name="insurance_info">
                        </div>
                        <div>
                            <label for="edit-asset-insurance-due">Insurance Due:</label>
                            <input type="date" id="edit-asset-insurance-due" name="insurance_due">
                        </div>
                    </div>
                </div>

                <!-- Permits & Documentation -->
                <div class="form-section">
                    <h3>Permits & Documentation</h3>
                    <div class="form-grid">
                        <div>
                            <label for="edit-asset-permit">Permit Info:</label>
                            <textarea id="edit-asset-permit" name="permit_info" rows="2"></textarea>
                        </div>
                        <div>
                            <label for="edit-asset-manual">Manual/Doc Path:</label>
                            <input type="text" id="edit-asset-manual" name="manual_or_doc_path">
                        </div>
                    </div>
                </div>

                <!-- Usage Information -->
                <div class="form-section">
                    <h3>Usage Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="edit-asset-usage-type">Usage Type:</label>
                            <select id="edit-asset-usage-type" name="usage_type">
                                <option value="">Select Usage Type</option>
                                <option value="hours">Hours</option>
                                <option value="ODO">ODO</option>
                                <option value="km">Kilometers</option>
                                <option value="cycles">Cycles</option>
                            </select>
                        </div>
                        <div>
                            <label for="edit-asset-usage-value">Usage Value:</label>
                            <input type="number" id="edit-asset-usage-value" name="usage_value" step="0.1" placeholder="Current hours/ODO reading">
                        </div>
                    </div>
                    <div class="form-section">
                        <label for="edit-asset-usage-notes">Usage Notes:</label>
                        <textarea id="edit-asset-usage-notes" name="usage_notes" rows="2" placeholder="Optional notes about this usage entry"></textarea>
                    </div>
                </div>

                <!-- Asset Photo -->
                <div class="form-section">
                    <h3>Asset Photo</h3>
                    <input type="file" id="edit-asset-photo" name="photo" accept="image/*" style="margin-bottom: 10px;">
                    <div id="edit-asset-photo-preview" style="margin-top: 10px;"></div>
                    <div id="edit-asset-current-photo" style="margin-top: 10px;"></div>
                </div>

                <!-- General Notes -->
                <div class="form-section">
                    <h3>General Notes</h3>
                    <textarea id="edit-asset-notes" name="notes" rows="3" placeholder="Any additional notes about this asset"></textarea>
                </div>


            </form>
        </div>
    </div>

    <!-- Maintenance Schedule Modal -->
    <div id="maintenance-schedule-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Maintenance Schedule</h2>
                <div class="modal-actions">
                    <button type="submit" form="maintenance-schedule-form" class="action-btn add-btn">
                        <i class="fa-solid fa-save"></i> Save Schedule
                    </button>
                    <button id="delete-maintenance-schedule-btn" class="action-btn delete-btn" style="display: none;">
                        <i class="fa-solid fa-trash-can"></i> Delete
                    </button>
                    <button type="button" class="close-maintenance-schedule-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Cancel
                    </button>
                </div>
            </div>
            <form id="maintenance-schedule-form">
                <input type="hidden" id="maintenance-schedule-asset-id" name="asset_id">
                
                <!-- Task Information -->
                <div class="form-section">
                    <h3>Task Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="maintenance-schedule-task">Task Description:</label>
                            <input type="text" id="maintenance-schedule-task" name="task_description" required>
                        </div>
                        <div>
                            <label for="maintenance-schedule-status">Status:</label>
                            <select id="maintenance-schedule-status" name="status">
                                <option value="pending">Pending</option>
                                <option value="scheduled">Scheduled</option>
                                <option value="in_progress">In Progress</option>
                                <option value="completed">Completed</option>
                                <option value="overdue">Overdue</option>
                            </select>
                        </div>
                        <div>
                            <label for="maintenance-schedule-unscheduled">Is Unscheduled:</label>
                            <select id="maintenance-schedule-unscheduled" name="is_unscheduled">
                                <option value="false">No</option>
                                <option value="true">Yes</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Schedule Information -->
                <div class="form-section">
                    <h3>Schedule Information</h3>
                    <div class="form-grid">
                        <div>
                            <label for="maintenance-schedule-due-date">Due Date:</label>
                            <input type="date" id="maintenance-schedule-due-date" name="due_date" required>
                            <small>Automatically calculated from interval and meter reading</small>
                        </div>
                        <div>
                            <label for="maintenance-schedule-completed-date">Completed Date:</label>
                            <input type="date" id="maintenance-schedule-completed-date" name="completed_date">
                        </div>
                        <div>
                            <label for="maintenance-schedule-interval-type">Interval Type:</label>
                            <select id="maintenance-schedule-interval-type" name="interval_type" required>
                                <option value="">Select Interval Type</option>
                                <option value="hours">Hours</option>
                                <option value="km">Kilometers</option>
                                <option value="days">Days</option>
                                <option value="weeks">Weeks</option>
                                <option value="months">Months</option>
                                <option value="years">Years</option>
                            </select>
                        </div>
                        <div>
                            <label for="maintenance-schedule-interval-value">Interval Value:</label>
                            <input type="number" id="maintenance-schedule-interval-value" name="interval_value" min="1" required>
                        </div>
                    </div>
                </div>

                <!-- Maintenance Trigger -->
                <div class="form-section">
                    <h3>Maintenance Trigger</h3>
                    <div class="form-grid">
                        <div>
                            <label for="maintenance-schedule-trigger-type">Trigger Type:</label>
                            <select id="maintenance-schedule-trigger-type" name="maintenance_trigger_type">
                                <option value="">No Trigger</option>
                                <option value="hours">Hours</option>
                                <option value="km">Kilometers</option>
                                <option value="date">Date</option>
                            </select>
                        </div>
                        <div>
                            <label for="maintenance-schedule-trigger-value">Trigger Value:</label>
                            <input type="number" id="maintenance-schedule-trigger-value" name="maintenance_trigger_value" min="0">
                        </div>
                        <div>
                            <label for="maintenance-schedule-last-usage">Last Maintenance Usage:</label>
                            <input type="number" id="maintenance-schedule-last-usage" name="last_maintenance_usage" step="0.1" min="0">
                        </div>
                        <div>
                            <label for="maintenance-schedule-meter-reading">Current Meter Reading:</label>
                            <input type="number" id="maintenance-schedule-meter-reading" name="meter_reading" min="0">
                        </div>
                    </div>
                </div>

                <!-- Cost & Supplier -->
                <div class="form-section">
                    <h3>Cost & Supplier</h3>
                    <div class="form-grid">
                        <div>
                            <label for="maintenance-schedule-cost">Cost:</label>
                            <input type="number" id="maintenance-schedule-cost" name="cost" step="0.01" min="0">
                        </div>
                        <div>
                            <label for="maintenance-schedule-supplier">Supplier:</label>
                            <input type="text" id="maintenance-schedule-supplier" name="supplier">
                        </div>
                        <div>
                            <label for="maintenance-schedule-invoice">Invoice Number:</label>
                            <input type="text" id="maintenance-schedule-invoice" name="invoice_number">
                        </div>
                    </div>
                </div>

                <!-- Notes -->
                <div class="form-section">
                    <h3>Notes</h3>
                    <textarea id="maintenance-schedule-notes" name="notes" rows="3" placeholder="Additional notes about this maintenance task"></textarea>
                </div>


            </form>
        </div>
    </div>
    
    <!-- Maintenance History Modal -->
    <div id="maintenance-history-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Maintenance History</h2>
                <button class="close-maintenance-history-btn action-btn">
                    <i class="fa-solid fa-xmark"></i> Close
                </button>
            </div>
            <div id="maintenance-history-content">
                <!-- Maintenance history will be populated here -->
            </div>
        </div>
    </div>
    
    <!-- Animal History Modal -->
    <div id="animal-history-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Animal History</h2>
                <button class="close-animal-history-btn action-btn">
                    <i class="fa-solid fa-xmark"></i> Close
                </button>
            </div>
            <div id="animal-history-content">
                <!-- Animal history will be populated here -->
            </div>
        </div>
    </div>

    <!-- Name Generation Wizard Modal -->
    <div id="name-wizard-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Old Norse Name Generator</h2>
                <button class="close-wizard-btn action-btn">
                    <i class="fa-solid fa-xmark"></i> Cancel
                </button>
            </div>
            <div id="wizard-content">
                <div class="wizard-step" id="wizard-step-1">
                    <h3>Step 1: Describe Birth Event</h3>
                    <p>Enter 3-5 English words describing something significant that happened around the time of birth:</p>
                    <div class="form-grid">
                        <div>
                            <label for="birth-word-1">Word 1:</label>
                            <input type="text" id="birth-word-1" placeholder="e.g., storm, morning, first">
                        </div>
                        <div>
                            <label for="birth-word-2">Word 2:</label>
                            <input type="text" id="birth-word-2" placeholder="e.g., strong, bright, winter">
                        </div>
                        <div>
                            <label for="birth-word-3">Word 3:</label>
                            <input type="text" id="birth-word-3" placeholder="e.g., calf, joy, new">
                        </div>
                        <div>
                            <label for="birth-word-4">Word 4 (optional):</label>
                            <input type="text" id="birth-word-4" placeholder="e.g., brave, lucky, special">
                        </div>
                        <div>
                            <label for="birth-word-5">Word 5 (optional):</label>
                            <input type="text" id="birth-word-5" placeholder="e.g., warrior, gentle, swift">
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <button type="button" id="translate-words-btn" class="action-btn">
                            <i class="fa-solid fa-language"></i> Translate to Old Norse
                        </button>
                    </div>
                </div>
                
                <div class="wizard-step" id="wizard-step-2" style="display: none;">
                    <h3>Step 2: Choose a Name</h3>
                    <p>Select an Old Norse name for the animal:</p>
                    <div id="name-options" class="name-options-grid">
                        <!-- Name options will be populated here -->
                    </div>
                    <div style="margin-top: 20px;">
                        <button type="button" id="select-name-btn" class="action-btn" disabled>
                            <i class="fa-solid fa-check"></i> Use Selected Name
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Event Modal -->
    <div id="add-event-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Add Event</h2>
                <div class="modal-actions">
                    <button type="submit" id="submit-event-btn" form="add-event-form" class="action-btn add-btn">
                        <i class="fa-solid fa-save"></i> Save Event
                    </button>
                    <button type="button" class="close-add-event-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Cancel
                    </button>
                </div>
            </div>
            <form id="add-event-form">
                <input type="hidden" id="event-date">
                <input type="hidden" id="event-time">
                
                <div class="form-section">
                    <h3>Event Type</h3>
                    <div class="form-grid">
                        <div>
                            <label for="event-category">Category:</label>
                            <select id="event-category" name="category" required>
                                <option value="">Select Category</option>
                                <option value="livestock">Livestock</option>
                                <option value="asset">Asset</option>
                            </select>
                        </div>
                        <div>
                            <label for="event-item-name">Item Name:</label>
                            <select id="event-item-name" name="item_name" required>
                                <option value="">Select Category First</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>Event Details</h3>
                    <div class="form-grid">
                        <div>
                            <label for="event-title">Event Title:</label>
                            <input type="text" id="event-title" name="title" required placeholder="e.g., Health Check, Maintenance, Treatment">
                        </div>
                        <div>
                            <label for="event-duration">Expected Duration (hours):</label>
                            <input type="number" id="event-duration" name="duration" min="0.5" step="0.5" placeholder="e.g., 1, 2.5" required>
                        </div>
                    </div>
                    <div>
                        <label for="event-notes">Notes:</label>
                        <textarea id="event-notes" name="notes" rows="4" placeholder="Detailed notes about the event..."></textarea>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>Event Status</h3>
                    <div class="form-grid">
                        <div>
                            <label for="event-status">Status:</label>
                            <select id="event-status" name="status">
                                <option value="scheduled">Scheduled</option>
                                <option value="in_progress">In Progress</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div>
                            <label for="event-priority">Priority:</label>
                            <select id="event-priority" name="priority">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                                <option value="urgent">Urgent</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-section" id="completion-fields" style="display: none;">
                    <h3>Completion Details</h3>
                    <div class="form-grid">
                        <div>
                            <label for="event-date-completed">Date Completed:</label>
                            <input type="date" id="event-date-completed" name="date_completed">
                        </div>
                        <div>
                            <label for="event-actual-duration">Actual Duration (hours):</label>
                            <input type="number" id="event-actual-duration" name="actual_duration" min="0.5" step="0.5" placeholder="e.g., 1.5, 2.5">
                        </div>
                    </div>
                </div>
                

            </form>
        </div>
    </div>

    <!-- Event Details Modal -->
    <div id="event-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal close-top-left">&times;</span>
            <div class="modal-header">
                <h2>Event Details</h2>
                <div class="modal-actions">
                    <button id="edit-event-btn" class="action-btn edit-btn" style="display: none;">
                        <i class="fa-solid fa-edit"></i> Edit Event
                    </button>
                    <button id="delete-event-btn" class="action-btn delete-btn" style="display: none;">
                        <i class="fa-solid fa-trash"></i> Delete Event
                    </button>
                    <button class="close-event-details-btn action-btn">
                        <i class="fa-solid fa-xmark"></i> Close
                    </button>
                </div>
            </div>
            <div class="form-section">
                <div id="event-details-content">
                    <!-- Event details will be populated here -->
                </div>
            </div>
        </div>
    </div>

</body>
</html>